syntax = "proto3";

package containerd.services.leases.v1;

import weak "gogoproto/gogo.proto";
import "google/protobuf/empty.proto";
import "google/protobuf/timestamp.proto";

option go_package = "github.com/containerd/containerd/api/services/leases/v1;leases";

// Leases service manages resources leases within the metadata store.
service Leases ***REMOVED***
	// Create creates a new lease for managing changes to metadata. A lease
	// can be used to protect objects from being removed.
	rpc Create(CreateRequest) returns (CreateResponse);

	// Delete deletes the lease and makes any unreferenced objects created
	// during the lease eligible for garbage collection if not referenced
	// or retained by other resources during the lease.
	rpc Delete(DeleteRequest) returns (google.protobuf.Empty);

	// List lists all active leases, returning the full list of
	// leases and optionally including the referenced resources.
	rpc List(ListRequest) returns (ListResponse);
***REMOVED***

// Lease is an object which retains resources while it exists.
message Lease ***REMOVED***
	string id = 1;

	google.protobuf.Timestamp created_at = 2 [(gogoproto.stdtime) = true, (gogoproto.nullable) = false];

	map<string, string> labels = 3;
***REMOVED***

message CreateRequest ***REMOVED***
	// ID is used to identity the lease, when the id is not set the service
	// generates a random identifier for the lease.
	string id = 1;

	map<string, string> labels = 3;
***REMOVED***

message CreateResponse ***REMOVED***
	Lease lease = 1;
***REMOVED***

message DeleteRequest ***REMOVED***
	string id = 1;
***REMOVED***

message ListRequest ***REMOVED***
	repeated string filters = 1;
***REMOVED***

message ListResponse ***REMOVED***
	repeated Lease leases = 1;
***REMOVED***
